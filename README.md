# PathHub - ファイルパス共有サービス

ファイルパス共有を、もっとスマートに。

## 🚀 機能

- **簡単リンク生成**: ファイルパスを短縮URLに変換
- **日本語パス対応**: 日本語を含むファイルパスも正確に処理
- **UNCパス対応**: ネットワークパス（\\server\share）も対応
- **ワンクリックアクセス**: ブラウザから直接エクスプローラーで開く
- **自動実行リンク**: アクセスと同時に自動でエクスプローラーを起動
- **パスコピー機能**: ワンクリックでパスをクリップボードにコピー

## 📋 セットアップ

### 1. サーバー起動
```bash
npm install
node server.js
```

### 2. クライアントアプリ設定
```bash
cd client-app
npm install
npm run install-protocol
```

## 🔧 使用方法

### 基本的な流れ
1. ブラウザで `http://localhost:3000` にアクセス
2. 共有したいファイルパスを入力
3. 「共有リンクを生成する」をクリック
4. **自動実行リンク**（推奨）を相手に送信
5. 相手がリンクにアクセスすると自動でエクスプローラーが開く

### 🎯 新機能：自動実行リンク

**従来**: リンク → ページ表示 → ボタンクリック → エクスプローラー起動  
**現在**: リンク → 自動でエクスプローラー起動 ✨

```
通常リンク: http://localhost:3000/s/abc12345
自動実行リンク: http://localhost:3000/s/abc12345?auto=true
```

## 🚨 初回設定

### Step 1: プロトコルハンドラーの許可
1. 任意の共有リンクにアクセス
2. 「エクスプローラーで開く」ボタンをクリック
3. ブラウザのプロトコル許可ダイアログで「**許可**」をクリック
4. 画面右上の青いボタン「PathHubクライアントを起動」をクリック

### Step 2: 動作テスト
アドレスバーに直接入力してテスト:
```
pathhub://C:\Users
```

## 🔍 トラブルシューティング

### 問題: エクスプローラーが開かない

**解決方法**:
1. **ブラウザを再起動**
2. **プロトコルハンドラーを再登録**:
   ```bash
   cd client-app
   npm run install-protocol
   ```
3. **セキュリティソフトの確認**: ウイルス対策ソフトがブロックしていないか確認

### 問題: 日本語パスで正しい場所が開かない

**確認**: 以下のパス形式で正常動作を確認済み
```
C:\Users\username\Documents\Blender\アクアリウムテクスチャー
```

### ログの確認
```bash
cd client-app
type pathhub-client.log
```

## 📁 プロジェクト構造

```
PathHub/
├── server.js              # メインサーバー
├── index.html             # フロントエンド
├── package.json           # プロジェクト設定
├── pathhub.db            # SQLiteデータベース
└── client-app/           # クライアントアプリ
    ├── index.js          # メインアプリ
    ├── install-protocol.js # プロトコル登録
    └── package.json      # クライアント設定
```

## 🌟 使用例

### 日本語パス
```
入力: C:\Users\akihiro\Documents\Blender\アクアリウムテクスチャー
出力: http://localhost:3000/s/abc12345?auto=true
```

### UNCパス（ネットワーク）
```
入力: \\MinoruStation\home\Drive\_NAS階層化root\07_画像
出力: http://localhost:3000/s/def67890?auto=true
```

### サポートするパス形式
- **ローカルパス**: `C:\Users\Documents\file.txt`
- **日本語パス**: `C:\ユーザー\ドキュメント\ファイル.txt`
- **UNCパス**: `\\server\share\folder`

## 🛡️ セキュリティ

- **ローカル実行**: プロトコルハンドラーは現在のユーザーのみ
- **パス検証**: 存在しないパスの場合は親フォルダを開く
- **エンコーディング**: UTF-8で正確な文字処理

## 📊 MVP機能完了

✅ **基本機能**: パス共有とリンク生成  
✅ **クライアントアプリ**: プロトコルハンドラー登録  
✅ **日本語対応**: 完全な日本語パス処理  
✅ **UNCパス対応**: ネットワークパス処理  
✅ **自動実行**: アクセス時の自動エクスプローラー起動  
✅ **重複防止**: 複数ウィンドウ対策  
✅ **エラーハンドリング**: 包括的なエラー処理

---

**🎯 使用方法**: 共有リンクを生成して、**自動実行リンク**を相手に送信するだけ！
